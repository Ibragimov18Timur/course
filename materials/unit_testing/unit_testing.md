{% include header.md %}

Введение в Unit-тестирование
===
{% include module-not-completed-advanced.md %}

Основные материалы
---------------------
1. [Видео: JUnit - Java для тестировщиков](https://www.youtube.com/watch?v=QJZb1fNYh9c){:target="_blank"}

Дополнительные материалы
---------------------
1. [Habrahabr: Юнит-тестирование для чайников](https://habr.com/ru/post/169381/){:target="_blank"}
1. [Habrahabr: Пирамида тестов на практике](https://habr.com/en/post/358950/){:target="_blank"}

Практическая работа
---------------------
Для выполнения данного задания вам понадобится работающий [Калькулятор]({{site.materialsurl}}calculator/calculator), 
который вы имплементировали двумя темами ранее.

Вам необходимо:
+ Добавить в `pom.xml` [Junit4](https://junit.org/junit4/){:target="_blank"} или [Junit5](https://junit.org/junit5/docs/current/user-guide/){:target="_blank"}
с нужным скоупом.
+ Покрыть код калькулятора тестами. Вам необходимо учесть не только позитивные сценарии, но и негативные. Сгруппируйте 
их в отдельные тест сьюты.
+ Протестируйте следующую функциональность:
    1. Суммирование, вычитаение, деление, умножение. Используйте ParametrizedTest.
    1. Некорректные операции должны выбрасывать `IllegalArgumentException` (Например деление на 0).
    1. Невалидная входная строка должна генерировать соответствующие исключения (Пустая строка, недопустимые символы,
два оператора подряд).
+ Используйте матчеры из библиотеки [Hamcrest](http://hamcrest.org/JavaHamcrest/tutorial){:target="_blank"}, чтобы 
валидировать результаты в тестах
+ Проверьте, что в вашей IDE присутствует плагин для проверки покрытия кода тестами. Если вы используете IntellijiIdea, 
то он должен быть уже установлен с самого начала. Запустите тесты для калькулятора в режиме покрытия кода, убедитесь, что
вы покрытие составляет > 90% по всем параметрам. Если это не так, допишите тесты.
+ Запустите тесты через мавен `mvn clean test` и через IDE. Какие отличия в этих подходах вы видите?
+ Подключите [Maven Surefire Report Plugin](https://maven.apache.org/surefire/maven-surefire-report-plugin/). С помощью
него сгенерируйте тест репорт и прикрепите этот отчет к вашему проекту.

Вопросы для самоконтроля
---------------------
1. Как вы понимаете, что такое юнит тестирование?
1. Опишите пирамиду тестов. Какое место в ней занимают юнит тесты?
1. Какие библиотеки обычно используют для юнит тестирования java-программ?
1. В какой директории принято писать юнит и интеграционные тесты?
1. Как написать простейший тест?
1. Как вы охарактеризуете классический юнит тест? Что означает аббривеатура F.I.R.S.T.?
1. Как мы можем сравнить результат выполнения метода `sum(2, 2)` и ожидаемый результат `4`?
1. Что делать, если перед всеми тестами нам нужно сделать какую-то инициализацию? Перед каждым тестом?
1. Что такое матчеры? Какую библиотеку стоит подключать, если нам не хватает матчеров из Junit?
1. Мы хотим простетировать метод `calcFactorial(num)` с различными числами. Как наиболее удобно и красиво это сделать?
1. Мы тестируем метод `readFile(path)`. Как мы можем протестировать, что этот метод выбросит `IOException`, если не найдет 
файл?
1. Мы тестируем метод `establishConnection(host)`. Как мы можем протестировать то, что метод выполняется меньше, чем за 1 
секунду?
1. Можем ли мы объединить тесты в логическую структуру и запускать их все вместе?
1. В чем вы видите разницу между такими методологиями тестирования как BDD и TDD?
1. Что такое покрытие тестами? Как его можно измерить?
1. Написав юнит тесты на новую фичу, мы увидели, что покрытие составляет `100%`. Можем ли мы быть уверены что багов нет?
